<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selamat Ulang Tahun Ari Hariyani!</title>
    
    <!-- Import Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;500;600&family=Dancing+Script:wght@500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color-1: #0f0c29;
            --bg-color-2: #302b63;
            --bg-color-3: #24243e;
            --text-light: #ffffff;
            --text-dim: #e0e0e0;
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Poppins', sans-serif;
            --font-handwriting: 'Dancing Script', cursive;
            --book-paper: #fdfaf6;
            --book-text: #333333;
            --gold: #d4af37;
            --error-red: #ff4d4d;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        body {
            font-family: var(--font-body);
            background: linear-gradient(135deg, var(--bg-color-1), var(--bg-color-2), var(--bg-color-3));
            background-attachment: fixed;
            color: var(--text-light);
            overflow: hidden; /* Locked initially */
        }

        /* PASSWORD SCREEN */
        #lock-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--bg-color-1), var(--bg-color-2), var(--bg-color-3));
            z-index: 9999;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.8s ease, visibility 0.8s;
        }

        #lock-screen.unlocked {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .login-box {
            text-align: center;
            padding: 40px;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            max-width: 350px;
            width: 90%;
        }

        .login-box h1 {
            font-family: var(--font-heading);
            color: var(--gold);
            margin-bottom: 25px;
            font-size: 1.8rem;
        }

        .login-box input {
            width: 100%;
            padding: 12px 20px;
            margin-bottom: 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            color: white;
            text-align: center;
            outline: none;
            transition: border 0.3s;
        }

        .login-box input:focus {
            border-color: var(--gold);
        }

        .login-box button {
            background: var(--gold);
            color: var(--bg-color-1);
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s, background 0.3s;
        }

        .login-box button:hover {
            transform: scale(1.05);
            background: #e5c05b;
        }

        #error-msg {
            color: var(--error-red);
            font-size: 0.8rem;
            margin-top: 10px;
            height: 1rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        /* MAIN CONTENT - HIDDEN INITIALLY */
        #main-content {
            opacity: 0;
            transition: opacity 1s ease;
        }

        #main-content.visible {
            opacity: 1;
        }

        /* SECTION HEADERS */
        .section-header {
            text-align: center;
            margin-bottom: 50px;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .section-header.active {
            opacity: 1;
            transform: translateY(0);
        }

        .section-header h2 {
            font-family: var(--font-heading);
            color: var(--gold);
            font-size: 1.8rem;
            display: inline-block;
            position: relative;
            padding-bottom: 10px;
        }

        .section-header h2::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 25%;
            width: 50%;
            height: 1px;
            background: rgba(212, 175, 55, 0.5);
        }

        /* CANVASES */
        #bg-canvas, #fireworks-canvas, #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
        }
        #bg-canvas { z-index: -2; }
        #fireworks-canvas { z-index: -1; }
        #confetti-canvas { z-index: 100; }

        /* KONTROL */
        .controls-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 200;
        }

        .floating-btn {
            background: rgba(212, 175, 55, 0.2);
            backdrop-filter: blur(8px);
            border: 1px solid var(--gold);
            color: var(--gold);
            padding: 10px 18px;
            border-radius: 50px;
            cursor: pointer;
            font-family: var(--font-body);
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        .floating-btn:hover {
            background: var(--gold);
            color: var(--bg-color-1);
            transform: translateY(-2px) scale(1.05);
        }

        /* DEKORASI */
        .bunting-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 120px;
            z-index: 15;
            pointer-events: none;
        }
        
        .bunting-string {
            position: absolute;
            width: 110%;
            height: 100px;
            left: -5%;
            border-top: 2px solid rgba(255,255,255,0.3);
            border-radius: 50% 50% 0 0; 
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            transform: translateY(-50px);
        }

        .flag {
            width: 0; height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid var(--gold);
            filter: drop-shadow(0 4px 4px rgba(0,0,0,0.3));
            animation: swing 3s ease-in-out infinite alternate;
            transform-origin: top center;
            margin-top: 48px;
        }
        .flag:nth-child(even) { border-top-color: #ff6b6b; }
        .flag:nth-child(3n) { border-top-color: #4ecdc4; }

        @keyframes swing {
            from { transform: rotate(-8deg); }
            to { transform: rotate(8deg); }
        }

        /* HERO SECTION */
        #hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 10;
            position: relative;
        }

        .hero-title {
            font-family: var(--font-heading);
            font-size: clamp(2.5rem, 8vw, 5.5rem);
            line-height: 1.2;
            font-weight: 900;
        }

        .hero-line {
            display: flex;
            justify-content: center;
            gap: 0.3em;
            margin-bottom: 10px;
        }

        .word {
            display: inline-block;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            cursor: default;
        }

        .word.animate {
            opacity: 1;
            transform: translateY(0);
        }

        .word:hover {
            transform: scale(1.1) translateY(-5px);
            color: var(--gold);
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.8), 0 0 40px rgba(212, 175, 55, 0.4);
        }

        .hero-subtitle {
            color: var(--gold);
            font-style: italic;
        }

        /* RUNNING TEXT */
        #running-text-section {
            padding: 100px 0;
        }

        .text-divider {
            position: relative;
            width: 100%;
            height: 60px;
            background: rgba(255,255,255,0.05);
            border-top: 1px solid rgba(212, 175, 55, 0.3);
            border-bottom: 1px solid rgba(212, 175, 55, 0.3);
            overflow: hidden;
            display: flex;
            align-items: center;
        }
        
        .scrolling-wrapper {
            display: flex;
            width: fit-content;
            animation: scrollText 40s linear infinite;
        }
        
        .reverse .scrolling-wrapper {
            animation: scrollTextReverse 40s linear infinite;
        }

        .scrolling-wrapper span {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--gold);
            padding: 0 40px;
            letter-spacing: 2px;
            text-transform: uppercase;
            white-space: nowrap;
        }

        @keyframes scrollText {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        @keyframes scrollTextReverse {
            0% { transform: translateX(-50%); }
            100% { transform: translateX(0); }
        }

        /* CANDLE SECTION */
        #candle-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            padding: 60px 0;
        }

        #candle-section .section-header {
            margin-bottom: 80px;
        }

        .candle-focus {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease;
        }

        .candle-focus:hover {
            transform: scale(1.05);
        }

        .single-candle {
            position: relative;
            width: 35px;
            height: 140px;
            background: linear-gradient(to right, #ffffff, #f0f0f0, #ffffff);
            border-radius: 6px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            z-index: 3;
        }

        .candle-gold-spiral {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: repeating-linear-gradient(45deg, transparent, transparent 15px, rgba(212, 175, 55, 0.4) 15px, rgba(212, 175, 55, 0.4) 25px);
            border-radius: 6px;
        }

        .wick {
            position: absolute;
            top: -12px; left: 50%;
            width: 4px; height: 12px;
            background: #222;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .flame {
            position: absolute;
            top: -55px; left: 50%;
            width: 30px; height: 55px;
            background: radial-gradient(ellipse at bottom, #fff 10%, #ffe600 40%, #ff6600 80%, transparent 100%);
            border-radius: 50% 50% 20% 20%;
            box-shadow: 0 0 20px #ff6600, 0 0 40px #ffe600;
            animation: flicker 0.1s infinite alternate;
            cursor: pointer;
            transform: translateX(-50%);
            z-index: 4;
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .flame.blown-out { opacity: 0; transform: translateX(-50%) scale(0); pointer-events: none; }

        .smoke {
            position: absolute;
            top: -30px; left: 50%;
            width: 2px; height: 2px;
            background: rgba(255,255,255,0.4);
            border-radius: 50%;
            transform: translateX(-50%);
            opacity: 0;
            pointer-events: none;
            z-index: 5;
        }
        .smoke.active { animation: smokeRise 2s ease-out forwards; }

        @keyframes smokeRise {
            0% { transform: translateX(-50%) translateY(0) scale(1); opacity: 0.6; filter: blur(2px); }
            100% { transform: translateX(-40%) translateY(-80px) scale(8); opacity: 0; filter: blur(6px); }
        }

        @keyframes flicker {
            0% { transform: translateX(-50%) scale(1) rotate(-2deg); }
            100% { transform: translateX(-50%) scale(1.05) rotate(2deg); }
        }

        #candle-text {
            margin-top: 50px;
            font-family: var(--font-heading);
            font-size: 1.4rem;
            color: var(--text-dim);
            text-align: center;
            transition: opacity 0.5s ease;
            max-width: 80%;
        }

        /* FLIPBOOK SECTION */
        #flipbook-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 100px 20px;
            position: relative;
            z-index: 10;
        }

        .book {
            position: relative;
            width: clamp(280px, 85vw, 400px);
            height: clamp(400px, 75vh, 550px);
            transform-style: preserve-3d;
            perspective: 1500px;
            display: flex;
            justify-content: center;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 1.2s ease;
            margin-top: 30px;
        }

        .book.is-open {
            transform: scale(1.05) rotate(2deg);
        }

        .cover {
            position: absolute;
            width: 100%; height: 100%;
            transform-origin: left center;
            transition: transform 1.2s cubic-bezier(0.4, 0, 0.2, 1);
            transform-style: preserve-3d;
            z-index: 5;
            cursor: pointer;
            border-radius: 2px 15px 15px 2px;
            box-shadow: 10px 10px 30px rgba(0,0,0,0.5);
        }
        .cover.open { transform: rotateY(-150deg); }

        .cover-front {
            position: absolute;
            width: 100%; height: 100%;
            background: linear-gradient(145deg, #3a326b, #1e1b38);
            border: 3px solid var(--gold);
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center;
            padding: 30px;
            backface-visibility: hidden;
            border-radius: 2px 15px 15px 2px;
        }
        .cover-back {
            position: absolute;
            width: 100%; height: 100%;
            background: #d4c8b2;
            transform: rotateY(180deg);
            backface-visibility: hidden;
            border-radius: 15px 2px 2px 15px;
        }

        .inside-page {
            position: absolute;
            width: 100%; height: 100%;
            background: var(--book-paper);
            color: var(--book-text);
            border-radius: 2px 15px 15px 2px;
            padding: 20px;
            box-shadow: inset -10px 0 30px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            z-index: 1;
        }

        /* PHOTO FRAME STYLE */
        .photo-frame {
            position: relative;
            width: 85%;
            aspect-ratio: 4/5.5;
            background: #fff;
            margin: 15px auto 25px auto;
            padding: 12px 12px 75px 12px; /* Increased bottom padding for 2 rows of text */
            box-shadow: 2px 10px 25px rgba(0,0,0,0.15);
            transform: rotate(-3deg);
            display: flex;
            flex-direction: column;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 1px solid rgba(0,0,0,0.05);
        }
        
        .photo-frame:hover {
            transform: rotate(0deg) scale(1.05);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        /* WASHI TAPE */
        .photo-frame::before {
            content: '';
            position: absolute;
            top: -15px;
            left: 50%;
            width: 80px;
            height: 30px;
            background: rgba(212, 175, 55, 0.4);
            transform: translateX(-50%) rotate(2deg);
            backdrop-filter: blur(2px);
            border-left: 2px dashed rgba(0,0,0,0.1);
            border-right: 2px dashed rgba(0,0,0,0.1);
            z-index: 2;
        }

        /* STICKERS */
        .sticker {
            position: absolute;
            font-size: 1.5rem;
            filter: drop-shadow(2px 2px 2px rgba(0,0,0,0.1));
            pointer-events: none;
            z-index: 3;
        }
        .sticker-star { top: -10px; right: -10px; color: #ffcc00; transform: rotate(15deg); }
        .sticker-sparkle { bottom: 85px; left: -15px; font-size: 1.2rem; }

        /* PHOTO CAPTION NAME - 2 ROWS */
        .photo-caption {
            position: absolute;
            bottom: 12px;
            left: 0;
            width: 100%;
            text-align: center;
            font-family: var(--font-handwriting);
            color: #444;
            display: flex;
            flex-direction: column;
            gap: 2px;
            line-height: 1;
        }

        .name-row {
            font-size: 1.6rem;
            font-weight: 700;
        }

        .date-row {
            font-size: 1.1rem;
            opacity: 0.8;
            font-weight: 500;
        }

        .photo-placeholder {
            width: 100%;
            flex: 1;
            background: #f8f8f8;
            border: 1px solid #eee;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .photo-placeholder::after {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("https://www.transparenttextures.com/patterns/natural-paper.png");
            opacity: 0.1;
            pointer-events: none;
        }

        .photo-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .letter-scroll-area { 
            flex: 1; 
            overflow-y: auto; 
            padding: 10px; 
            display: flex;
            flex-direction: column;
            align-items: center; 
            justify-content: flex-start;
        }
        
        .letter-content { 
            font-family: var(--font-heading); 
            font-size: 1.1rem; 
            line-height: 1.8; 
            text-align: left; 
            width: 100%;
        }

        footer { padding: 80px 40px; text-align: center; color: var(--text-dim); font-size: 0.9rem; }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
            40% {transform: translateY(-10px);}
            60% {transform: translateY(-5px);}
        }

        @media (max-width: 600px) {
            .section-header h2 { font-size: 1.4rem; }
            .login-box { padding: 25px; }
            #candle-text { font-size: 1.1rem; }
            .photo-frame { width: 90%; }
            .name-row { font-size: 1.3rem; }
            .date-row { font-size: 0.9rem; }
        }

    </style>
</head>
<body>

    <!-- LOCK SCREEN -->
    <div id="lock-screen">
        <div class="login-box">
            <h1>Berikan Password</h1>
            <input type="password" id="password-input" placeholder="Masukkan Password..." autocomplete="off">
            <button id="login-btn">Masuk</button>
            <p id="error-msg">Password salah, coba lagi!</p>
            <p style="font-size: 0.7rem; opacity: 0.5; margin-top: 15px;">Hint: Kucing Hitam Kesayangan (kecil semua)</p>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main-content">
        <div class="controls-container">
            <button class="floating-btn" id="trigger-confetti">
                <span>üéâ</span> Pencet
            </button>
        </div>

        <div class="bunting-container">
            <div class="bunting-string">
                <div class="flag"></div><div class="flag"></div><div class="flag"></div><div class="flag"></div>
                <div class="flag"></div><div class="flag"></div><div class="flag"></div><div class="flag"></div>
                <div class="flag"></div><div class="flag"></div><div class="flag"></div><div class="flag"></div>
            </div>
        </div>

        <canvas id="bg-canvas"></canvas>
        <canvas id="fireworks-canvas"></canvas>
        <canvas id="confetti-canvas"></canvas>

        <!-- HERO -->
        <section id="hero">
            <div class="section-header active" style="margin-bottom: 20px;">
                <h2>A Special Day</h2>
            </div>
            <div class="hero-title">
                <div class="hero-line">
                    <span class="word">Selamat</span>
                    <span class="word">Ulang</span>
                    <span class="word">Tahun</span>
                </div>
                <div class="hero-line">
                    <span class="word hero-subtitle">Ari</span>
                    <span class="word hero-subtitle">Hariyani</span>
                </div>
            </div>
            <div style="position: absolute; bottom: 8vh; opacity: 0.5; font-size: 0.8rem; letter-spacing: 2px; animation: bounce 2s infinite">‚Üì SCROLL KE BAWAH DEK ‚Üì</div>
        </section>

        <!-- RUNNING TEXT -->
        <section id="running-text-section">
            <div class="section-header">
                <h2>Harapan-Harapan</h2>
            </div>
            <div class="text-divider">
                <div class="scrolling-wrapper">
                    <span>HEPIBESDEYY</span><span>SEMOGA SEHAT SELALU</span><span>PANJANG UMUR</span><span>LOLOS SNBP</span><span>REZEKI LANCAR</span><span>HEPIBESDEYY</span><span>SEMOGA SEHAT SELALU</span><span>PANJANG UMUR</span><span>LOLOS SNBP</span><span>REZEKI LANCAR</span><span>HEPIBESDEYY</span><span>SEMOGA SEHAT SELALU</span><span>PANJANG UMUR</span><span>LOLOS SNBP</span><span>REZEKI LANCAR</span><span>HEPIBESDEYY</span><span>SEMOGA SEHAT SELALU</span><span>PANJANG UMUR</span><span>LOLOS SNBP</span><span>REZEKI LANCAR</span>
                </div>
            </div>
            <div class="text-divider reverse" style="margin-top: 20px;">
                <div class="scrolling-wrapper reverse">
                    <span>CEPET LULUS</span><span>JADI BOS KUCING</span><span>BISA KELILING DUNIA</span><span>LOLOS SNBT</span><span>PUNYA FERRARI</span><span>JADI MILYARDER</span><span>JADI JURAGAN KUCING</span><span>CEPET LULUS</span><span>JADI BOS KUCING</span><span>BISA KELILING DUNIA</span><span>LOLOS SNBT</span><span>PUNYA FERRARI</span><span>JADI MILYARDER</span><span>JADI JURAGAN KUCING</span>
                </div>
            </div>
            <div class="text-divider" style="margin-top: 20px;">
                <div class="scrolling-wrapper">
                    <span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span>
                    <!-- Duplicate for seamless scroll -->
                    <span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span><span>AAMIIN</span>
            </div>
        </section>

        <!-- CANDLE -->
        <section id="candle-section">
            <div class="section-header">
                <h2>Make some wish üéÇ</h2>
            </div>
            <div class="candle-focus">
                <div class="single-candle">
                    <div class="candle-gold-spiral"></div>
                    <div class="wick"></div>
                    <div class="flame" id="main-flame"></div>
                    <div class="smoke" id="candle-smoke"></div>
                </div>
                <p id="candle-text">Pejamkan mata, make a wish dalam hati!!<br><br>Kalo udah, klik apinya buat tiup lilin</p>
            </div>
        </section>

        <!-- FLIPBOOK -->
        <section id="flipbook-section">
            <div class="section-header">
                <h2>Something Special for U</h2>
            </div>
            <div class="book" id="main-book-element">
                <div class="cover" id="book-cover">
                    <div class="cover-front">
                        <div style="color:var(--gold); font-size:1.5rem">‚úß ‚ú¶ ‚úß</div>
                        <h1 style="margin:20px 0; font-family:var(--font-heading); font-style:italic; color:white;">Delapan<br>Belas</h1>
                        <div style="color:var(--gold); font-size:1.5rem">‚úß ‚ú¶ ‚úß</div>
                        <p id="cover-instruction" style="margin-top:40px; opacity:0.6; font-size:0.8rem">Buka</p>
                    </div>
                    <div class="cover-back"></div>
                </div>
                <div class="inside-page">
                    <div class="letter-scroll-area">
                        <!-- UPDATED PHOTO FRAME -->
                        <div class="photo-frame">
                            <span class="sticker sticker-star">‚≠ê</span>
                            <span class="sticker sticker-sparkle">‚ú®</span>
                            
                            <div class="photo-placeholder">
                                <!-- Ganti link foto di bawah -->
                                <img src="Frame 5321.png" alt="Ari Hariyani" onerror="this.src='https://via.placeholder.com/400x500?text=Insert+Photo+Here'">
                            </div>
                            
                            <!-- 2 ROW NAME CAPTION -->
                            <div class="photo-caption">
                                <div class="name-row">Ari Hariyani</div>
                                <div class="date-row">28-02-2008</div>
                            </div>
                        </div>
                        <div class="letter-content" id="letter-content"></div>
                    </div>
                </div>
            </div>
        </section>

        <footer>
            <p>- 28 Februari 2026 -</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            /* --- Password System --- */
            const lockScreen = document.getElementById('lock-screen');
            const mainContent = document.getElementById('main-content');
            const passwordInput = document.getElementById('password-input');
            const loginBtn = document.getElementById('login-btn');
            const errorMsg = document.getElementById('error-msg');
            const CORRECT_PASSWORD = "manda";

            function unlock() {
                if (passwordInput.value === CORRECT_PASSWORD) {
                    lockScreen.classList.add('unlocked');
                    mainContent.classList.add('visible');
                    document.body.style.overflow = 'auto';
                    startHeroAnimation();
                } else {
                    errorMsg.style.opacity = '1';
                    passwordInput.style.borderColor = 'var(--error-red)';
                    setTimeout(() => {
                        errorMsg.style.opacity = '0';
                        passwordInput.style.borderColor = 'rgba(255, 255, 255, 0.2)';
                    }, 2000);
                }
            }

            loginBtn.addEventListener('click', unlock);
            passwordInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') unlock();
            });

            /* --- Intersection Observer --- */
            const observerOptions = { threshold: 0.2 };
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.section-header').forEach(header => {
                observer.observe(header);
            });

            /* --- Hero Animation --- */
            function startHeroAnimation() {
                const words = document.querySelectorAll('.word');
                words.forEach((word, i) => {
                    setTimeout(() => word.classList.add('animate'), 200 * (i + 1));
                });
            }

            /* --- Background Star Canvas --- */
            const bgCanvas = document.getElementById('bg-canvas');
            const bgCtx = bgCanvas.getContext('2d');
            let stars = [];
            function initStars() {
                bgCanvas.width = window.innerWidth; bgCanvas.height = window.innerHeight;
                stars = Array.from({length: 150}, () => ({
                    x: Math.random() * bgCanvas.width, y: Math.random() * bgCanvas.height,
                    r: Math.random() * 1.5, a: Math.random()
                }));
            }
            function drawStars() {
                bgCtx.clearRect(0,0,bgCanvas.width, bgCanvas.height);
                bgCtx.fillStyle = "white";
                stars.forEach(s => {
                    bgCtx.globalAlpha = Math.abs(Math.sin(s.a += 0.01));
                    bgCtx.beginPath(); bgCtx.arc(s.x, s.y, s.r, 0, Math.PI*2); bgCtx.fill();
                });
                requestAnimationFrame(drawStars);
            }
            initStars(); drawStars();

            /* --- Confetti Logic --- */
            const confCanvas = document.getElementById('confetti-canvas');
            const confCtx = confCanvas.getContext('2d');
            let confetti = [];
            function createConfetti() {
                for(let i=0; i<80; i++) {
                    confetti.push({
                        x: Math.random() * confCanvas.width, y: -20,
                        size: Math.random() * 4 + 4,
                        color: `hsl(${Math.random()*360}, 70%, 60%)`,
                        speed: Math.random() * 3 + 3,
                        r: Math.random() * 0.2, dr: Math.random() * 0.1
                    });
                }
            }
            function drawConfetti() {
                confCtx.clearRect(0,0,confCanvas.width, confCanvas.height);
                confetti.forEach((c, i) => {
                    confCtx.fillStyle = c.color;
                    confCtx.save();
                    confCtx.translate(c.x, c.y);
                    confCtx.rotate(c.r);
                    confCtx.fillRect(-c.size/2, -c.size/2, c.size, c.size);
                    confCtx.restore();
                    c.y += c.speed;
                    c.r += c.dr;
                    if(c.y > confCanvas.height + 20) confetti.splice(i, 1);
                });
                requestAnimationFrame(drawConfetti);
            }
            confCanvas.width = window.innerWidth; confCanvas.height = window.innerHeight;
            drawConfetti();
            document.getElementById('trigger-confetti').addEventListener('click', createConfetti);

            /* --- Fireworks --- */
            const fwCanvas = document.getElementById('fireworks-canvas');
            const fwCtx = fwCanvas.getContext('2d');
            let particles = [];
            class Particle {
                constructor(x, y, color) {
                    this.x = x; this.y = y; this.color = color;
                    this.velocity = { x: (Math.random() - 0.5) * 8, y: (Math.random() - 0.5) * 8 };
                    this.alpha = 1; this.friction = 0.95;
                }
                draw() {
                    fwCtx.globalAlpha = this.alpha;
                    fwCtx.beginPath(); fwCtx.arc(this.x, this.y, 2, 0, Math.PI * 2);
                    fwCtx.fillStyle = this.color; fwCtx.fill();
                }
                update() {
                    this.velocity.x *= this.friction; this.velocity.y *= this.friction;
                    this.x += this.velocity.x; this.y += this.velocity.y;
                    this.alpha -= 0.01;
                }
            }
            function createFirework(x, y) {
                const colors = ['#ff0000', '#ffd700', '#00ff00', '#00ffff', '#ff00ff', '#ffffff'];
                const color = colors[Math.floor(Math.random() * colors.length)];
                for (let i = 0; i < 40; i++) particles.push(new Particle(x, y, color));
            }
            function animateFireworks() {
                fwCtx.clearRect(0, 0, fwCanvas.width, fwCanvas.height);
                particles.forEach((p, i) => {
                    if (p.alpha > 0) { p.update(); p.draw(); }
                    else { particles.splice(i, 1); }
                });
                if (Math.random() < 0.03) createFirework(Math.random() * fwCanvas.width, Math.random() * fwCanvas.height * 0.6);
                requestAnimationFrame(animateFireworks);
            }
            fwCanvas.width = window.innerWidth; fwCanvas.height = window.innerHeight;
            animateFireworks();

            /* --- Candle Interaction --- */
            const flame = document.getElementById('main-flame');
            const candleText = document.getElementById('candle-text');
            const smoke = document.getElementById('candle-smoke');

            flame.addEventListener('click', () => {
                flame.classList.add('blown-out');
                smoke.classList.add('active');
                createConfetti();
                candleText.style.opacity = '0';
                setTimeout(() => {
                    candleText.innerHTML = "YEEEAYYY!! Happy 18 years old<br><br>Semoga doa-doanya terkabul semua AAMIIN!!";
                    candleText.style.opacity = '1';
                    for(let i=0; i<5; i++) setTimeout(() => createFirework(Math.random()*fwCanvas.width, Math.random()*fwCanvas.height), i*200);
                }, 500);
            });

            /* --- Flipbook Logic --- */
            const bookCover = document.getElementById('book-cover');
            const mainBookElement = document.getElementById('main-book-element');
            const letterContent = document.getElementById('letter-content');
            const coverInstruction = document.getElementById('cover-instruction');
            let isOpened = false;
            let isTyping = false;
            let typingComplete = false;
            const messageLines = [
                "Happy Birthday orang plengerrr! üéâ",
                "Selamat bertambah tua. Nggak kerasa banget kan‚Ä¶ tiba-tiba udah umur 18 wkwk.",
                "Semoga di umur yang baru ini hidupmu dipenuhi kebaikan dan hal-hal indah. Semoga doa-doa yang disimpan diam-diam, satu per satu benar-benar terkabul.",
                "May the universe always be on your side, and may every step you take be guided toward a bright and beautiful future.",
                "And also...Thank you udah jadi temen gw yang bisa diajak ngobrol random apapun itu sampe ganti hari wkwkwk.",
                "Jangan cape buat ngejar cita-cita yaa kids... Gw doain lu jadi milyarder, punya rumah 7 lantai, punya mobil sport selusin, bisa keliling dunia sepuasnya, menguasai seribu bahasa dan apapun itu terserah wkwk. Semoga selalu dikelilingi orang-orang yang selalu support lu. Dan gw yakin lu pasti bisa kejar semua impianmu ituh. AAMIIN 33X.",
                "Can‚Äôt wait to see you at the top, becoming the person you‚Äôve always wanted to be. And no matter how high you go, I hope you‚Äôll still laugh the same way you do now.",
                "Once again, HBD Arinnn, I wish you all the best.",
                "_______________",
                "Salam Hormat dari Raja Iblis,",
                "Apin"
            ];

            bookCover.addEventListener('click', () => {
                if(!isOpened) {
                    bookCover.classList.add('open');
                    mainBookElement.classList.add('is-open'); 
                    isOpened = true;
                    if(!typingComplete && !isTyping) {
                        isTyping = true;
                        setTimeout(typeWriter, 1000);
                    }
                    coverInstruction.textContent = "Tutup";
                } else {
                    bookCover.classList.remove('open');
                    mainBookElement.classList.remove('is-open'); 
                    isOpened = false;
                    coverInstruction.textContent = "Buka";
                }
            });

            let lineIdx = 0, charIdx = 0;
            function typeWriter() {
                if(lineIdx < messageLines.length) {
                    if(charIdx === 0) {
                        const p = document.createElement('p');
                        p.style.marginBottom = "15px";
                        letterContent.appendChild(p);
                    }
                    letterContent.lastChild.textContent += messageLines[lineIdx][charIdx];
                    charIdx++;
                    if(charIdx < messageLines[lineIdx].length) setTimeout(typeWriter, 40);
                    else { lineIdx++; charIdx = 0; setTimeout(typeWriter, 600); }
                } else {
                    isTyping = false;
                    typingComplete = true;
                }
            }

            window.addEventListener('resize', () => { 
                initStars(); 
                fwCanvas.width = window.innerWidth; fwCanvas.height = window.innerHeight;
                confCanvas.width = window.innerWidth; confCanvas.height = window.innerHeight;
            });
        });
    </script>
</body>
</html>